<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>The Australian Gay Marriage Pulse</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/freelancer.min.css" rel="stylesheet">

    <!-- Plotly source -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>    
  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">Aussie Gay Marriage Pulse</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#portfolio">The Pulse</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#about">How it works</a>
            </li>
            <li class="nav-item">
              <a class="nav-link js-scroll-trigger" href="#contact">Important links</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead">
      <div class="container">
        <img class="img-fluid" src="img/heart.svg" width=300px height=300px style="fill:blue; width=300px; height=300px" alt="">
        <div class="intro-text">
          <span class="name">The Aussie Gay Marriage Pulse</span>
          <hr class="star-light">
          <span class="skills">A simple tool to keep a watch on public sentiment before the Gay Marriage postal survey.</span>
        </div>
      </div>
    </header>

    <!-- Portfolio Grid Section -->
    <section id="portfolio">
      <div class="container">
        <h2 class="text-center">The 'big picture' pulse
        <p style="text-align: center">Tracking 'vote yes' versus 'vote no' in a 24 hour period</p>
        </h2>
        <hr class="star-primary">
        <div class="row">
          <div class = "col-12" id="pulse-chart-2" style="height:380px;">
        </div>
      </div>
      <div class="container">
        <p style="padding-top: 50px;">
        <h2 class="text-center">The hourly pulse
            <p style="text-align: center">Tracking hourly search intensity for 'vote yes' and 'vote no'</p>
        </h2>
        <hr class="star-primary">
        <div class="row">
          <div class = "col-12" id="pulse-chart" style="height:380px;">
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="success" id="about">
      <div class="container">
        <h2 class="text-center">How it works</h2>
        <hr class="star-light">
        <div class="row">
        
          <div class="col"></div>
          <div class = "col-8">
            <p>The Pulse measures the rate of Google searches for the phrases 'vote yes' and 'vote no' within Australia.</p>
            <p>The ratio between 'vote yes' and 'vote no' is the Pulse. A pulse above 50% means sentiment favours 'vote yes'. A pulse below 50% means sentiment favours 'vote no'.</p>
            <p>The Pulse downloads data on an hourly basis, measures the odds ratio on a 24 hour basis, and plots the odds on a rolling 7 day average basis.</p>
          </div>
          <div class="col"></div>
          <div class="col-lg-8 mx-auto text-center">
            <a href="https://notebooks.azure.com/pboulus/libraries/electionanalysis/html/google-trends.ipynb" class="btn btn-lg btn-outline" target="_blank">
              View the notebook
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <div class="container">
        <h2 class="text-center">Important links</h2>
        <hr class="star-primary">
        <div class="row">
          <div class="col">
            </div>
            <div class = "col-8">
              <p>It's really important that you get out the vote.</p>
              <p>You can donate here:</p>
              <p>You can contribute here:</p>
            </div>
            <div class="col">
            </div>
          
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-center">
      <div class="footer-above">
        <div class="container">
          <div class="row">
            <div class="footer-col col-md-4">
              <h3>Location</h3>
              <p>Sydney
                <br>Australia</p>
            </div>
            <div class="footer-col col-md-4">
              <h3>Around the Web</h3>
              <!--
              <ul class="list-inline">
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-facebook"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-google-plus"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-twitter"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-linkedin"></i>
                  </a>
                </li>
                <li class="list-inline-item">
                  <a class="btn-social btn-outline" href="#">
                    <i class="fa fa-fw fa-dribbble"></i>
                  </a>
                </li>
              </ul>
            -->
            </div>
            <div class="footer-col col-md-4">
              <h3>About me</h3>
              <p>I'm a management consultant and 
                amateur programmer based in Sydney, Australia.
              I built this site to help illuminate public sentiment
            in the lead up to the Australian Marriage Law Postal Survey.</p>
            </div>
          </div>
        </div>
      </div>
      <div class="footer-below">
        <div class="container">
          <div class="row">
            <div class="col-lg-12">
                <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 International License</a>.
            </div>
          </div>
        </div>
      </div>
    </footer>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-top d-lg-none">
      <a class="btn btn-primary js-scroll-trigger" href="#page-top">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/freelancer.min.js"></script>
    <script>
    Plotly.d3.csv('https://raw.githubusercontent.com/pboulus/pboulus.github.io/master/gay-marriage-pulse/app/result.csv', function(rows){
      var trace1 = {
        type: 'scatter',                    // set the chart type
        mode: 'lines',                      // connect points with lines
        x: rows.map(function(row){          // set the x-data
          return row['date'];
        }),
        y: rows.map(function(row){          // set the x-data
          return row['normalized_yes'];
        }),
        line: {                             // set the width of the line.
          width: 1,
          color: 'rgb(214, 110, 36)'
        },
        name: '\'Vote Yes\''
      };

      var trace2 = {
        type: 'scatter',                    // set the chart type
        mode: 'lines',                      // connect points with lines
        x: rows.map(function(row){          // set the x-data
          return row['date'];
        }),
        y: rows.map(function(row){          // set the x-data
          return row['normalized_no'];
        }),
        line: {                             // set the width of the line.
          width: 1,
          color: 'rgb(45, 4, 40)'
        },
        name: '\'Vote No\''
      };

      
  
      var layout = {
        yaxis: {title: "Search intensity"},       // set the y axis title
        xaxis: {
          showgrid: false,                  // remove the x-axis grid lines
          tickformat: "%B, %Y"              // customize the date format to "month, day"
        },
        margin: {                           // update the left, bottom, right, top margin
          l: 40, b: 20, r: 10, t: 20
        },
        hoverinfo: "none"
      };
      var data = [trace1, trace2];
      Plotly.plot(document.getElementById('pulse-chart'), data, layout, {showLink: false});

      
  });
  </script>
<script>
  Plotly.d3.csv('https://raw.githubusercontent.com/pboulus/pboulus.github.io/master/gay-marriage-pulse/app/result-grouped.csv', function(rows){
    var trace1 = {
      type: 'scatter',                    // set the chart type
      mode: 'lines',                      // connect points with lines
      x: rows.map(function(row){          // set the x-data
        return row['date'];
      }),
      y: rows.map(function(row){          // set the x-data
        return row['odds'];
      }),
      line: {                             // set the width of the line.
        width: 1,
        color: 'rgb(214, 110, 36)'
      },
      name: 'Odds of \'Vote Yes\''
    };

    var trace2 = {
      type: 'scatter',                    // set the chart type
      mode: 'lines',                      // connect points with lines
      x: rows.map(function(row){          // set the x-data
        return row['date'];
      }),
      y: Array(500).fill(0.5),
      line: {                             // set the width of the line.
        width: 1,
        color: 'rgb(0,0,0)'
      },
      name: '50:50 yes:no'
    };


    var layout = {
      yaxis: {title: "Odds",
              range: [0, 1]},       // set the y axis title
      xaxis: {
        showgrid: false,                  // remove the x-axis grid lines
        tickformat: "%B, %Y"              // customize the date format to "month, day"
      },
      margin: {                           // update the left, bottom, right, top margin
        l: 40, b: 20, r: 10, t: 20
      },
      hoverinfo: "none"
    };
    var data = [trace1, trace2];
    Plotly.plot(document.getElementById('pulse-chart-2'), data, layout, {showLink: false});
});
</script>
  </body>

</html>
